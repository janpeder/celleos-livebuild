\input texdraw
\input epsf

\special{papersize=210mm,297.6mm} % A4 paper

\font\ftitteltop=cmcsc10 at 32pt
\font\ftittelbottom=cmcsc10 at 28pt
\font\ftopptekst=cmr10 at 6pt
\font\ftopptekststor=cmr10 at 7.8pt
\font\fforfatter=cmr10 at 6pt
\font\fs=cmbx10 scaled\magstep3
\font\fss=cmcsc10 scaled\magstep2

\headline={\ftopptekststor B\kern+0.1pt{\ftopptekst RUKERMANUAL FOR } C\kern+0.1pt{\ftopptekst ELLEOS \hfill Jan Peder David-Andersen, januar 2023}}

\topglue 6pc
\centerline{\ftitteltop Brukermanual}
\vskip 10pt
\centerline{\ftittelbottom for Celleos}
\vskip 8pc

\noindent Skrevet av: Jan Peder David-Andersen ({\tt peder.david-andersen@tffk.no})

\noindent Sist endret: 5. januar 2023

\vskip 3pc
\def\tocwidth{38pc}

\beginsection {\fs Innhold}


\hbox to \tocwidth{1. Beskrivelse av l\o sningen \dotfill 2}
\hbox to \tocwidth{1.1. Bakgrunn om Celleos og DFS \dotfill 90}
\hbox to \tocwidth{1.2. Funksjonalitet \dotfill 90}
\hbox to \tocwidth{1.3. Teknisk beskrivelse \dotfill 90}
\hbox to \tocwidth{1.4. Vurdering av sikkerheten \dotfill 90}
\vskip 4pt
\hbox to \tocwidth{2. Installasjonsveiledning \dotfill 90}
\hbox to \tocwidth{2.1. Klargj\o re minnepenn for installasjon \dotfill 90}
\hbox to \tocwidth{2.2. Bakgrunn om UEFI og BIOS \dotfill 90}
\hbox to \tocwidth{2.3. Klargj\o ring av datamaskin f\o r installasjon \dotfill 90}
\hbox to \tocwidth{2.4. Installasjon \dotfill 90}
\hbox to \tocwidth{2.5. Sikring av datamaskin etter installasjon \dotfill 90}

\vfill\eject

\topglue 1pc
\beginsection {\fs 1. Beskrivelse av l\o sningen}

Celleos er et operativsystem utviklet for \aa{} kunne brukes av innsatte i norske fengsler, uten tilsyn. Det er utviklet med fokus p\aa{} sikkerhet og utdanning.


\beginsection {\fss 1.1. Bakgrunn om Celleos og DFS}

I skoleavdelingene i norske fengsler i dag benyttes datasystemet {\it Desktop for Skolen} (DFS). Dette er et funksjonelt og sikkert system som gj\o r det mulig for elever i fengsler \aa{} gj\o re skolearbeid p\aa{} datamaskin i skoletiden. DFS gir en begrenset internettilgang, samtidig som det oppfyller n\o dvendige krav til sikkerhet.

Elever som \o nsker \aa{} bruke datamaskin til skolearbeid p\aa{} kveldstid har i utgangspunktet ikke mulighet til dette i norske fengsler. Enkelte fengsler har bestemt lokalt at skoleavdelingene f\aa r lov til \aa{} dele ut datamaskiner til utvalgte elever. Elevene har disse maskinene p\aa{} sin celle og de brukes uten tilsyn. Av sikkerhetshensyn er det derfor viktig at det ikke er mulig \aa{} kommunisere ved hjelp av disse maskinene.

Celleos er et operativsystem som er utviklet for datamaskiner som elevene har p\aa{} cella. Form\aa let med Celleos er at det skal v\ae re lett og raskt \aa{} installere, at det skal v\ae re sikkert og at det skal inneholde den viktigste programvaren som elever har bruk for i en skolesituasjon. Celleos gir ingen mulighet for internettforbindelse eller annen kommunikasjon, da dette ikke lar seg gj\o re av sikkerhetshensyn.

\beginsection {\fss 1.2. Funksjonalitet}

Celleos installeres av skolens systemansvarlige ved hjelp av en minnepenn. Selve installasjonsprosessen er automatisert s\aa{} langt det lar seg gj\o re. Etter installasjonen m\aa{} skolens systemansvarlige sikre maskinen. Dette m\aa{} gj\o res manuelt da det involverer noen fysiske steg, samt noen instillinger i datamaskinens oppsett, som ikke kan automatiseres. N\aa r systemet er installert og maskinen er sikret er den klar til utlevering til elev.

Celleos inneholder mye nyttig skolerelatert programvare slik som program for tekstbehandling, presentasjon, regneark, bildebehandling, {\it GeoGebra}, programmering i {\it Python}, {\it Sketchup} og mye annet.

Systemet gj\o r det umulig \aa{} koble maskinen til Internett eller annet nettverk. USB-tilkoblinger blir ogs\aa{} sperret slik at det eneste som g\aa r an \aa{} koble til er tastatur, mus og skjerm. Det er mulig \aa{} sette det opp slik at godkjente minnepenner kan kobles til systemet. Godkjenning av minnepenner baserer seg p\aa{} {\it VID/PID} som er samme prinsippet som DFS bruker.

Celleos er laget for \aa{} fungere p\aa{} noks\aa{} gamle datamaskiner. Ettersom PC p\aa{} celle ikke er en rettighet elevene har, settes det vanligvis ikke av mye penger til dette i skolens budsjett. Derfor er det fint \aa{} ha muligheten til \aa{} bruke eldre datautstyr til dette. I tillegg sparer man b\aa de penger og milj\o et ved \aa{} gjenbruke datautstyr som kanskje ellers ville blitt kastet.

\beginsection {\fss 1.3. Teknisk beskrivelse}

Celleos er basert p\aa{} {\it Debian GNU/Linux}. Automatiseringen av installasjonen av Celleos er gjort ved hjelp av verkt\o yet {\it live-build}, som er en del av Debian-prosjektet. Sperring av USB-enheter gj\o res med programvaren {\it USBGuard} og sperring av nettverksforbindelser gj\o res med brannmuren {\it iptables}. Mer detaljer om Celleos-prosjektet kan finnes p\aa{} prosjektet sin {\it github}-side:
\vskip 8pt
\noindent {\tt https://github.com/janpeder/celleos-livebuild}

\beginsection {\fss 1.4. Vurdering av sikkerheten}

Trusselbildet i forbindelse med datamaskin p\aa{} celle g\aa r i hovedsak ut p\aa{} at en elev benytter en slik datamaskin til \aa{} kommunisere med andre. Verste tenkelige situasjon er at en domfelt benytter en datamaskin utlevert av skolen til \aa{} kontakte forn\ae rmede i sak eller planlegge ny kriminalitet.
De fleste av scenariene beskrevet under forutsetter at elev har smuglet inn en liten maskinvare-enhet som muliggj\o r kommunikasjon. Dette kan for eksempel v\ae re et modem som muliggj\o r internettforbindelse over mobilnettet. Slike enheter kan kobles til datamaskinens USB-kontakt, nettverkskontakt eller tilkobles ved hjelp av BlueTooth.
Se tabellen under for vurdering av sikkerhetstrusler og beskyttelse mot disse.

Sikkerhetstrussel	Beskyttelse mot trussel i Celleos
Elev benytter tr\aa dl\o st nettverk innebygd i datamaskin til \aa{} kommunisere med andre.	En viktig forutsetning for \aa{} ivareta sikkerhet er at tr\aa dl\o se nettverkskort m\aa{} v\ae re fysisk fjernet fra datamaskinen f\o r den gis til elev.
Elev kobler USB-enhet til datamaskinen som gir internettforbindelse (for eksempel et 4G-modem).	Programvare (USBGuard) blokkerer alle USB-enheter unntatt tastatur, mus og lagringsenheter med godkjent produkt-ID (VID/PID). (Godkjenning av USB-lagringsenheter basert p\aa{} VID/PID benyttes ogs\aa{} i DFS.)

I tillegg til dette er all kommunikasjon over IPv4 og IPv6 er blokkert ved hjelp av brannmur (iptables).
Elev kobler en liten WiFi-ruter til nettverkskontakt p\aa{} datamaskin og kommuniserer med andre.	All kommunikasjon over IPv4 og IPv6 er blokkert ved hjelp av brannmur (iptables).
Elev kobler ekstern nettverksenhet til datamaskinen over Bluetooth og bruker dette til \aa{} kommunisere med andre.	All kommunikasjon over IPv4 og IPv6 er blokkert ved hjelp av brannmur (iptables).
Elev \aa pner datamaskinen og monterer ny maskinvare som muliggj\o r kommunikasjon.	Kabinett p\aa{} datamaskin forsegles med forseglingsteip, slik at det vil vises i ettertid om dette har blitt \aa pnet av elev.
Elev installerer nytt operativsystem p\aa{} datamaskinen og f\aa r p\aa{} denne m\aa ten administrator-rettigheter. Deretter tilkobles for eksempel et eksternt tr\aa dl\o st nettverkskort til USB-kontakten for \aa{} muliggj\o re kommunikasjon.	BIOS/UEFI innstillinger p\aa{} datamaskinen m\aa{} endres slik at det ikke er mulig \aa{} laste inn operativsystem fra nettverk, USB, CDROM eller andre eksterne medier. Det er viktig \aa{} sjekke at dette er gjort f\o r datamaskinen leveres ut til elev.
Elev \aa pner datamaskinen og monterer ny harddisk med nytt operativsystem og f\aa r p\aa{} denne m\aa ten administrator-rettigheter. Se scenariet over for hvordan administrator-rettigheter kan utnyttes.	Kabinett p\aa{} datamaskin forsegles med forseglingsteip, slik at det vil vises i ettertid om dette har blitt \aa pnet av elev.



\beginsection {\fs 2. Installasjonsveiledning}

Celleos installeres ved at man f\o rst laster ned en {\it avbildingsfil} og skriver denne til en minnepenn. Deretter installerer man Celleos ved hjelp av minnepennen. Her f\o lger en detaljert beskrivelse av hvordan dette gj\o res.

\beginsection {\fss 2.1. Klargj\o re minnepenn for installasjon}

For \aa{} lage installasjonsminnepennen trenger du en minnepenn med minimum 4GB kapasitet og en datamaskin med internettforbindelse. Alt p\aa{} minnepennen vil bli overskrevet, s\aa{} s\o rg for \aa{} ta kopi av alt du vil ta vare p\aa{} f\o r du begynner. Se instruksjon nedenfor.
\item{1.} Bes\o k f\o lgende lenke og last ned en avbildingsfil for celleos. Dersom det finnes flere versjoner velger du den som har den nyeste datoen i filnavnet.

\vskip 4pt

{\tt https://www.mediafire.com/folder/y0ff1nlbepsa8/Celleos}

\vskip 4pt

\item{2.} N\aa r avbildingsfilen er lastet ned laster du ned og installerer programmet {\it Rufus}. Rufus finner du her:
\vskip 4pt
{\tt https://rufus.ie/}

\centerline{
\epsfxsize 6cm
\epsffile{bilder/rufus-nedlastning.eps}
}

bilde som viser hvor du klikker for \aa{} laste ned
\item{3.} \AA pne Rufus, som du nettopp lastet ned.
\item{4.} I programmet Rufus velger du .....
Det vil da se omtrent slik ut.
\item{5.} Trykk p\aa{} "Start" og vent til blabla. Minnepennen er n\aa{} klargjort.

\beginsection {\fss 2.2. Bakgrunn om UEFI og BIOS}

Datamaskiner er laget slik at n\aa r de sl\aa s p\aa{} startes den programvaren som ligger lagret p\aa{} begynnelsen av maskinens harddisk. Det er slik maskinen finner og starter operativsystemet. Du skal n\aa{} endre instillingene i datamaskinen slik at den i stedet starter programvaren p\aa{} minnepennen. Men f\o r vi g\aa r inn p\aa{} hvordan dette gj\o res m\aa{} det forklares litt mer i detalj om hvordan dette virker.

For at programvare skal fungere p\aa{} datamskiner fra ulike produsenter m\aa{} produsentene bli enige om  \aa{} gj\o re enkelte ting p\aa{} samme m\aa te. Slik enighet oppn\aa s gjennom at det skrives {\it standardiseringsdokumenter}. M\aa ten datamaskinen leter etter programvare n\aa r maskinen skrus p\aa{} er standardisert slik. Hvis dette ikke var standardisert ville vi i verste fall m\aa ttet lage ulike installasjonsminnepennener for de ulike merkene - en for Lenovo, en annen for Dell og  en tredje for HP osv. Men takket v\ae re standarden virker en minnepenn p\aa{} alle.

Men riktig s\aa{} heldige er vi likevel ikke. For p\aa{} begynnelsen av 2000-tallet ble det klart at standarden som definerte hvordan maskinen skal starte opp var gammel og utdatert og at det var behov for en ny standard. Vi har i dag derfor to ulike standarder. Den nye heter {\it Unified Extensible Firmware Interface} (UEFI). Den gamle kalles vanligvis {\it BIOS}. 

Celleos bruker BIOS som oppstartsmetode. Dette er for at det skal fungere med gamle datamaskiner som ble laget f\o r UEFI ble vanlig. 

\beginsection {\fss 2.3. Klargj\o ring av datamaskin f\o r installasjon}

For at installasjonsprogrammet p\aa{} minnepennen skal startes n\aa r maskina skrus p\aa , m\aa{} vi endre instillingene p\aa{} datamaskina. Maskina m\aa{} stilles inn p\aa{} \aa{} starte (boote) fra USB og oppstartmodus m\aa{} v\ae re {\it BIOS/Legacy/CSM (ikke UEFI)}. Fremgangsm\aa ten er ulik p\aa{} ulike datamaskiner. Her vil jeg beskrive det som er felles for de ulike produsentene. 
\item{1.} Hvis datamaskinen er p\aa, skru den av.
\item{2.} Du skal n\aa{} starte opp datamaskina og holde inne en bestemt tast. Hvilken tast du skal holde inne varierer avhengig av produsent. Det kommer vanligvis opp p\aa{} skjermen rett etter at datamaskinen startes, for eksempel kan det st\aa{} «Press F2 to enter Setup». De vanligste tastene er enten F1, F2, F10, ENTER eller DEL.
\item{3.} Du kommer n\aa{} til menyen for datamaskinens innstillinger. Ofte finnes det et menyvalg for ``boot order'' eller tilsvarende. Her er det viktig at USB er f\o rst i rekkef\o lgen.
\item{4.} S\o rg for at oppstartsmodus BIOS er valgt. De ulike produsentene bruker ulike navn for dette. Noen kaller det {\it BIOS}, noen kaller det {\it Legacy} og noen kaller det {\it Compatibility Support Module (CSM)}. 
Etter dette skal installasjonsprogrammet for Celleos startes automatisk n\aa r minnepennen st\aa r i PCen og maskina skrus p\aa.


\beginsection {\fss 2.4. Installasjon}

N\aa r du har startet opp installasjonsprogrammet fra minnepennen (se avsnittet over) ser det slik ut:

\centerline{
\epsfxsize 9cm
\epsffile{bilder/celleos-installdialog.eps}
}

Trykk ENTER for \aa{} g\aa{} videre.
F\o lg installasjonsveiviseren. Du vil bli spurt om \aa{} opprette et root-passord. En root-bruker er det samme som en administrator-bruker. En person som kjenner root-passordet vil ogs\aa{} ha alle tilganger p\aa{} datamaskinen. Det er derfor viktig at du lager et sikkert root-passord, og at du tar godt vare p\aa{} dette passordet og passer p\aa{} at uvedkommende ikke f\aa r kjennskap til det. 

\beginsection {\fss 2.5. Sikring av datamaskin etter installasjon}

\beginsection {\fss ? Sjekkliste f\o r utlevering til elev og loggf\o ring/oversikt over maskiner}

\beginsection {\fss Administrasjon og bruk av Celleos}

-Hvordan finne svar p\aa{} sp\o rsm\aa l relatert til linux, gnome, debian osv
-Brukeren "root"
-Nullstille elevbruker i Celleos
-Hvordan \aa pne for internettforbindelse
-Hvordan \aa pne for USB-enheter

\vfill\eject\bye
